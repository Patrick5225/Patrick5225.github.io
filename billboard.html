<!DOCTYPE HTML>

<html>

<head>
	<title>Patrick Chao</title>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
	<link rel="stylesheet" href="assets/css/main.css" />
	<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
	<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
	<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
	<link rel="manifest" href="/site.webmanifest">
</head>

<style>
	#btnScrollToTop {
		visibility: hidden;
		position: fixed;
		right: 55px;
		bottom: 25px;
		border: none;
		outline: none;
		cursor: pointer;
		z-index: 3;
	}
</style>

<script>
	// Hides button until scroll to outline
	window.onscroll = function () {
		if (document.body.ScrollTop >= 1350 || document.documentElement.scrollTop > 1350) {
			document.getElementById("btnScrollToTop").style.visibility = "visible"
		} else {
			document.getElementById("btnScrollToTop").style.visibility = "hidden";
		}
	};
</script>

<body class="is-preload">

	<a href="#top" class="button primary icon solid fa-arrow-up" id="btnScrollToTop">
		<span>Top</span>
	</a>

	<!-- Header -->
	<header id="header">

		<!-- Logo -->
		<div class="logo">
			<a href="/"><strong>Patrick Chao</strong></a>
		</div>

		<!-- Nav -->
		<nav id="nav">
			<ul>
				<li><a href="/">Home</a></li>
				<li class="current"><a href="/#projects">Projects</a></li>
			</ul>
		</nav>

	</header>

	<!-- Wrapper -->
	<div id="wrapper">

		<!-- Section -->
		<section class="main style1">
			<div class="image" data-position="center">
				<img src="images/billboard/logo.png" alt="" />
			</div>
			<header class="small">
				<h1>Billboard Year-End Charts Analysis</h1>
				<p>The Billboard Year-End chart is a chart published by Billboard
					each year that displays yearly rankings of the top 100 songs,
					which are determined by the Billboard company themself. But does Billboard
					really rank their charts based on measures such as popularity,
					as they claim?</p>
			</header>
			<div class="inner">
				<p><b>To view the project with all the source code, click
						<a href="billboard-code">here</a>. For the
						GitHub repository, click
						<a href="https://github.com/Patrick5225/Billboard-Year-End-Top-Songs">here</a>.
					</b>
				</p>
				<p><b>Data source:</b> <a
						href="https://en.wikipedia.org/wiki/Billboard_Year-End_Hot_100_singles_of_1960">
						https://en.wikipedia.org/wiki/Billboard_Year-End_Hot_100_singles_of_1960</a>
					(replace 1960 with any year between 1960-2020)
				</p>

				<h2>Brief Overview</h2>
				<p>Every year, Billboard releases chart rankings of the top 100 songs of
					the year. Each billboard chart year starts and ends around the month of
					December. According to Billboard, rankings are determined based on factors
					such as sales, amount of streams on music streaming services such
					as Spotify, and how frequently songs are played on radio stations.
					Is this true that Billboard ranks their charts according to these factors?</p>
				<p>
					In this project, I collected data of every song
					that has appeared on the Billboard Year-End charts from years
					1960-2020, along with measures such as popularity and other
					audio features of each song, to answer the question above. I also
					used the collected data to observe if there were any common
					characteristics among songs that appeared on Billboard charts,
					if there were any relationships among variables such as the
					audio features of songs and the year it was ranked on the
					charts, and to explore which artists and songs appeared most
					often.</p>

				<span id="top"></span>
				<hr />

				<h2>Outline of Analysis:</h2>
				<ol>
					<a href="#part-1">
						<li><u>Web Scraping Wikipedia's Billboard Year-End Charts</u></li>
					</a>
					<a href="#part-2">
						<li><u>Extracting Spotify Ids (using Spotify's API) and cleaning data</u></li>
					</a>
					<a href="#part-3">
						<li><u>Extracting Spotify Audio Features (using Spotify's API)
								to add even more data</u></li>
					</a>
					<a href="#part-4">
						<li><u>Exploring Billboard's Hot 100 Year-End Charts (1960-2020)
								with visuals</u></li>
					</a>
				</ol>

				<span id="part-1"></span>
				<hr />

				<!-- Part 1 -->
				<h2>Part 1: Web Scraping Wikipedia's Billboard Year-End Charts</h2>
				<p>This part extracts song information (rank, title, and artist) from Wikipedia pages for
					Billboard's Year-End Hot 100 charts for years 1960-2020.</p>
				<p><b>Website:</b>
					<a href="https://en.wikipedia.org/wiki/Billboard_Year-End_Hot_100_singles_of_1960">
						https://en.wikipedia.org/wiki/Billboard_Year-End_Hot_100_singles_of_1960</a>
					(Replace 1960 with any desired year between 1960-2020)
				</p>
				<p>Note that there are three years (1963, 1966, 1975) that had an
					original list, but were revised by Billboard due to errors or
					recalculations. So the old lists eventually got replaced with
					a newer list. We will account for these changes and use the
					revised lists to collect the data in our web scraping.</p>
				<strong>Import necessary libraries for scraping websites:</strong>
				<pre><code>import csv
import time
import requests
import bs4
</code></pre>
				<pre><code># Wikipedia Billboard Year-End pages from 1960-Present follow this format
base_url = "https://en.wikipedia.org/wiki/Billboard_Year-End_Hot_100_singles_of_{}"
</code></pre>

				<p>Below is the code used to web scrape information:</p>
				<pre><code># initizialize empty list
song_list = []
					
# loop through each year and extract relevant song information to list
for year in range(1960,2020):
	res = requests.get(base_url.format(year))
	soup = bs4.BeautifulSoup(res.text, "lxml")
					
	# break out of loop if website technical issues occur
	if res.status_code != 200:
		print("ERROR. CANNOT SCRAPE ANYMORE.")
		break

	# select revised list if it exists, else get the original list
	try:
		selection = soup.select('.wikitable')[1]
	except:
		selection = soup.select('.wikitable')[0]

	tr = selection.select('tr')

	# add each row to song list
	for item in tr[1:]:
		row_list = []

		# append rankings
		rank = item.select('td')[0].text
		row_list.append(rank)

		# append song titles
		title = item.select('td')[1].text
		row_list.append(title.strip('"'))

		# append song artists
		artist = item.select('td')[2].text
		row_list.append(artist.strip('\n'))

		# append Billboard year    
		row_list.append(year)

		# append row with all of the data above
		song_list.append(row_list)

	# slowdown to avoid making quick requests
	time.sleep(5)
</code></pre>
				<p>Let's output the first 5 rows and last 5 rows of our list of scraped data.</p>
				<p>
				<pre><b>First 5 rows:</b>
[['1', 'Theme from A Summer Place', 'Percy Faith', 1960],
['2', "He'll Have to Go", 'Jim Reeves', 1960],
['3', "Cathy's Clown", 'The Everly Brothers', 1960],
['4', 'Running Bear', 'Johnny Preston', 1960],
['5', 'Teen Angel', 'Mark Dinning', 1960]]</pre>
				<pre><b>Last 5 rows:</b>
[['96', 'Eyes on You', 'Chase Rice', 2019],
['97', 'All to Myself', 'Dan + Shay', 2019],
['98', 'Boyfriend', 'Ariana Grande and Social House', 2019],
['99', 'Walk Me Home', 'Pink', 2019],
['100', 'Robbery', 'Juice Wrld', 2019]]</pre>
				</p>
				<p>Seems like everything is working correctly. We still need song
					information for the year 2020, so we'll go ahead and do that
					now using similar code as above, but accounting for the different
					HTML formatting used in the Wikipedia page for the year 2020. If we
					check the first and last 5 rows of the 2020 list, it seems like
					everything is working as intended.</p>
				<p>
				<pre><b>First 5 rows:</b>
[['1', 'Blinding Lights', 'The Weeknd', 2020],
['2', 'Circles', 'Post Malone', 2020],
['3', 'The Box', 'Roddy Ricch', 2020],
['4', "Don't Start Now", 'Dua Lipa', 2020],
['5', 'Rockstar', 'DaBaby featuring Roddy Ricch', 2020]]</pre>
				<pre><b>Last 5 rows:</b>
[['96', 'More Than My Hometown', 'Morgan Wallen', 2020],
['97', "Lovin' on You", 'Luke Combs', 2020],
['98', 'Said Sum', 'Moneybagg Yo', 2020],
['99', 'Slide', 'H.E.R. featuring YG', 2020],
['100', 'Walk Em Down', 'NLE Choppa featuring Roddy Ricch', 2020]]</pre>
				</p>
				<p>With our final procedure, we will put everything we gathered
					together into a csv file called <i>wikipedia_scraper.csv.</i></p>
				<div class="table-wrapper">
					<table>
						<thead>
							<tr>
								<th>rank</th>
								<th>title</th>
								<th>artist</th>
								<th>year</th>
							</tr>
						</thead>
						<tbody>
							<tr>
								<td>1</td>
								<td>Theme from A Summer Place</td>
								<td>Percy Faith</td>
								<td>1960</td>
							</tr>
							<tr>
								<td>2</td>
								<td>He'll Have to Go</td>
								<td>Jim Reeves</td>
								<td>1960</td>
							</tr>
							<tr>
								<td>...</td>
								<td>...</td>
								<td>...</td>
								<td>...</td>
							</tr>
							<tr>
								<td>99</td>
								<td>Slide</td>
								<td>H.E.R. featuring YG</td>
								<td>2020</td>
							</tr>
							<tr>
								<td>100</td>
								<td>Walk Em Down</td>
								<td>NLE Choppa featuring Roddy Ricch</td>
								<td>2020</td>
							</tr>

						</tbody>
					</table>
				</div>




				<span id="part-2"></span>
				<hr />

				<h2>2. Extracting Spotify Ids (using Spotify's API) and cleaning data</h2>

				<p>In this part, Spotify URIs (Spotify ids) will be extracted using
					web developer tools from Spotify's Web API. With these Spotify
					URIs, we can retrieve song feature information such as the song's
					popularity, duration, loudness, etc.</p>
				<p>Documentation of Spotify's Web API: <a
						href="https://developer.spotify.com/documentation/web-api/">https://developer.spotify.com/documentation/web-api/</a>
				</p>

				<div class="table-wrapper">
					<table>
						<thead>
							<tr>
								<th></th>
								<th>rank</th>
								<th>title</th>
								<th>artist</th>
								<th>year</th>
							</tr>
						</thead>
						<tbody>
							<tr>
								<td>0</td>
								<td>1</td>
								<td>Theme from A Summer Place</td>
								<td>Percy Faith</td>
								<td>1960</td>
							</tr>
							<tr>
								<td>1</td>
								<td>2</td>
								<td>He'll Have to Go</td>
								<td>Jim Reeves</td>
								<td>1960</td>
							</tr>
							<tr>
								<td>2</td>
								<td>3</td>
								<td>Cathy's Clown</td>
								<td>The Everly Brothers</td>
								<td>1960</td>
							</tr>
							<tr>
								<td>3</td>
								<td>4</td>
								<td>Running Bear</td>
								<td>Johnny Preston</td>
								<td>1960</td>
							</tr>
							<tr>
								<td>4</td>
								<td>5</td>
								<td>Teen Angel</td>
								<td>Mark Dinning</td>
								<td>1960</td>
							</tr>
							<tr>
								<td>...</td>
								<td>...</td>
								<td>...</td>
								<td>...</td>
								<td>...</td>
							</tr>
						</tbody>
					</table>
				</div>

			</div>
		</section>

		<!-- Section -->
		<section class="main style2">
			<header class="small">
				<h2>Get in touch</h2>
				<p>Feel free to contact me for any questions or comments.
				</p>
				<footer>
					<ul class="icons">
						<li><a href="https://www.linkedin.com/in/pchaoanalyst/"
								class="icon brands alt fa-linkedin"><span class="label">Phone</span></a></li>
						<li><a href="https://github.com/Patrick5225" class="icon brands alt fa-github"><span
									class="label">Phone</span></a></li>
						<li><a href="mailto:patrickchao9@gmail.com" class="icon solid alt fa-envelope"><span
									class="label">Email</span></a></li>
					</ul>
				</footer>
		</section>
	</div>

	</div>

	<!-- Footer -->
	<footer id="footer">
		&copy; Copyright 2020-2021. All rights reserved.
	</footer>

	<!-- Scripts -->
	<script src="assets/js/jquery.min.js"></script>
	<script src="assets/js/jquery.dropotron.min.js"></script>
	<script src="assets/js/browser.min.js"></script>
	<script src="assets/js/breakpoints.min.js"></script>
	<script src="assets/js/util.js"></script>
	<script src="assets/js/main.js"></script>

</body>

</html>